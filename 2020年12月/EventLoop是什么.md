# Event Loop 是什么？

先看一个常见的场景，如果我们同时执行了三种不同的异步事件：

```js
setTimeout(foo, 100);
fs.readFile('./README.md', bar);
server.on('close', doSth);
```

JS 作为单线程的语言，肯定不会分出三条线程去执行这三条语句，我们假设计时器结束的一瞬间，正好三个回调函数**同时触发**了，Node 会怎么处理呢？

1. Node 肯定会以某种顺序执行；
2. 这种顺序应该是规定好的（优先级）。

回到 Event Loop。

什么叫做 Event？Event 就是事件，比如回调函数的触发就是一个事件。什么叫做 Loop？Loop 就是循环，比如 for 循环 while 循环。

事件是有优先级的，所以处理时候是分先后的。Node.js 按照顺序去“询问”每个 Event，并且循环往复的去“询问”：Event1 => Event2 => Event3 => Event1 => Event2 => ...这就变成了 **「轮询」**。

**操作系统触发事件，JavaScript 处理事件，Event Loop 就是对事件处理顺序的管理方案。**

```
     |-----------------------|
---->|         timer         |
|    |-----------------------|
|                | 
|                |
|    |-----------------------|
|    |    close callbacks    |
|    |-----------------------|
|                | 
|                |
|    |-----------------------|
|    |     idle, prepare     |
|    |-----------------------|
|                | 
|                |                 |------------------|
|    |-----------------------|     |     incoming:    |
|    |          poll         |<----|    connections,  |
|    |-----------------------|     |     data, etc.   |
|                |                 |------------------|
|                |
|    |-----------------------|
|    |         check         |
|    |-----------------------|
|                | 
|                |
|    |-----------------------|
-----|    close callbacks    |
     |-----------------------|

```
